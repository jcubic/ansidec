<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Client Decoding conversion</title>
  </head>
  <body>
    <input id="file" type="file" />
    <pre id="output" style="background: black"></pre>
    <script src="../index.js"></script>
    <script src="https://cdn.terminal.jcubic.pl/iconv.js"></script>
    <script>
     var output = document.getElementById('output');
     function format(buff) {
         var str = iconv.decode(Buffer.from(buff), 'CP437');
         output.innerHTML = ansi.html(str);
     }
     fetch('FILE_ID.ANS').then(res => res.arrayBuffer()).then(format);
     document.querySelector('#file').addEventListener('change', function(event) {
         var reader = new FileReader();
         reader.onload = function(event) {
             output.innerHTML = ansi.html(event.target.result);
             format(event.target.result);
         };
         reader.readAsArrayBuffer(event.target.files[0]);
     });
  </script>
  </body>
</html>
